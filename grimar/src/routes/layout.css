@import 'tailwindcss';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

@theme {
	--font-sans:
		'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue',
		Arial, sans-serif;

	/* Gem Colors (Spell School Colors) */
	--color-gem-ruby: var(--theme-gem-ruby);
	--color-gem-sapphire: var(--theme-gem-sapphire);
	--color-gem-emerald: var(--theme-gem-emerald);
	--color-gem-amethyst: var(--theme-gem-amethyst);
	--color-gem-topaz: var(--theme-gem-topaz);

	/* Semantic theme colors - these are what components use */
	--color-bg-canvas: var(--theme-bg-canvas);
	--color-bg-card: var(--theme-bg-card);
	--color-bg-overlay: var(--theme-bg-overlay);
	--color-accent: var(--theme-accent);
	--color-accent-glow: var(--theme-accent-glow);
	--color-text-primary: var(--theme-text-primary);
	--color-text-secondary: var(--theme-text-secondary);
	--color-text-muted: var(--theme-text-muted);
	--color-border: var(--theme-border);
	--color-border-hover: var(--theme-border-hover);

	--animate-shimmer: shimmer 3s linear infinite;
	--animate-float: float 6s ease-in-out infinite;
	--animate-enter: slide-up-fade 0.5s cubic-bezier(0.16, 1, 0.3, 1);
	--animate-pulse-slow: pulse-glow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;

	@keyframes shimmer {
		0% {
			background-position: 200% 0;
		}
		100% {
			background-position: -200% 0;
		}
	}

	@keyframes float {
		0%,
		100% {
			transform: translateY(0);
		}
		50% {
			transform: translateY(-6px);
		}
	}

	@keyframes slide-up-fade {
		0% {
			opacity: 0;
			transform: translateY(12px);
		}
		100% {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@keyframes pulse-glow {
		0%,
		100% {
			opacity: 1;
			box-shadow: 0 0 12px var(--color-accent-glow);
		}
		50% {
			opacity: 0.8;
			box-shadow: 0 0 20px var(--color-accent-glow);
		}
	}
}

/* ========================
   THEME DEFINITIONS
   ======================== */

/* Amethyst - Deep mystical purple (default) */
:root,
[data-theme='amethyst'] {
	--theme-bg-canvas: #0f172a;
	--theme-bg-card: rgba(30, 27, 75, 0.6);
	--theme-bg-overlay: rgba(49, 46, 129, 0.8);
	--theme-accent: #a855f7;
	--theme-accent-glow: rgba(168, 85, 247, 0.5);
	--theme-accent-rgb: 168, 85, 247;
	--theme-bg-overlay-rgb: 49, 46, 129;
	--theme-gem-ruby: #f472b6;
	--theme-gem-sapphire: #38bdf8;
	--theme-gem-emerald: #4ade80;
	--theme-gem-amethyst: #c084fc;
	--theme-gem-topaz: #fbbf24;
	--theme-text-primary: #f8fafc;
	--theme-text-secondary: #94a3b8;
	--theme-text-muted: #64748b;
	--theme-border: rgba(255, 255, 255, 0.1);
	--theme-border-hover: rgba(255, 255, 255, 0.2);
	--theme-effect-url: '';
}

/* Arcane - Golden Weave radiance (warm divine magic) */
[data-theme='arcane'] {
	--theme-bg-canvas: #451a03;
	--theme-bg-card: rgba(120, 53, 15, 0.7);
	--theme-bg-overlay: rgba(146, 64, 14, 0.8);
	--theme-accent: #f59e0b;
	--theme-accent-glow: rgba(245, 158, 11, 0.6);
	--theme-accent-rgb: 245, 158, 11;
	--theme-bg-overlay-rgb: 146, 64, 14;
	--theme-gem-ruby: #dc2626;
	--theme-gem-sapphire: #eab308;
	--theme-gem-emerald: #d97706;
	--theme-gem-amethyst: #fef3c7;
	--theme-gem-topaz: #fde047;
	--theme-text-primary: #fef3c7;
	--theme-text-secondary: #fcd34d;
	--theme-text-muted: #d97706;
	--theme-border: rgba(245, 158, 11, 0.2);
	--theme-border-hover: rgba(245, 158, 11, 0.35);
}

/* Nature - Verdant forest (druidic magic) */
[data-theme='nature'] {
	--theme-bg-canvas: #052e16;
	--theme-bg-card: rgba(19, 78, 74, 0.7);
	--theme-bg-overlay: rgba(17, 94, 89, 0.8);
	--theme-accent: #10b981;
	--theme-accent-glow: rgba(16, 185, 129, 0.5);
	--theme-accent-rgb: 16, 185, 129;
	--theme-bg-overlay-rgb: 17, 94, 89;
	--theme-gem-ruby: #fb7185;
	--theme-gem-sapphire: #2dd4bf;
	--theme-gem-emerald: #4ade80;
	--theme-gem-amethyst: #6ee7b7;
	--theme-gem-topaz: #fbbf24;
	--theme-text-primary: #f0fdf4;
	--theme-text-secondary: #86efac;
	--theme-text-muted: #6ee7b7;
	--theme-border: rgba(16, 185, 129, 0.15);
	--theme-border-hover: rgba(16, 185, 129, 0.25);
}

/* Fire - Blazing inferno (dragonfire rage) */
[data-theme='fire'] {
	--theme-bg-canvas: #450a0a;
	--theme-bg-card: rgba(127, 29, 29, 0.7);
	--theme-bg-overlay: rgba(153, 27, 27, 0.8);
	--theme-accent: #f97316;
	--theme-accent-glow: rgba(249, 115, 22, 0.6);
	--theme-accent-rgb: 249, 115, 22;
	--theme-bg-overlay-rgb: 153, 27, 27;
	--theme-gem-ruby: #ef4444;
	--theme-gem-sapphire: #f97316;
	--theme-gem-emerald: #facc15;
	--theme-gem-amethyst: #fde047;
	--theme-gem-topaz: #fef3c7;
	--theme-text-primary: #fef2f2;
	--theme-text-secondary: #fca5a5;
	--theme-text-muted: #f87171;
	--theme-border: rgba(249, 115, 22, 0.2);
	--theme-border-hover: rgba(249, 115, 22, 0.35);
}

/* Ice - Crystalline frost (clarity, precision) */
[data-theme='ice'] {
	--theme-bg-canvas: #0c4a6e;
	--theme-bg-card: rgba(14, 116, 144, 0.7);
	--theme-bg-overlay: rgba(21, 94, 117, 0.8);
	--theme-accent: #06b6d4;
	--theme-accent-glow: rgba(6, 182, 212, 0.5);
	--theme-accent-rgb: 6, 182, 212;
	--theme-bg-overlay-rgb: 21, 94, 117;
	--theme-gem-ruby: #f9a8d4;
	--theme-gem-sapphire: #7dd3fc;
	--theme-gem-emerald: #22d3ee;
	--theme-gem-amethyst: #e0f2fe;
	--theme-gem-topaz: #cbd5e1;
	--theme-text-primary: #ecfeff;
	--theme-text-secondary: #7dd3fc;
	--theme-text-muted: #38bdf8;
	--theme-border: rgba(6, 182, 212, 0.15);
	--theme-border-hover: rgba(6, 182, 212, 0.25);
}

/* Void - Cosmic darkness (eldritch, forbidden knowledge) */
[data-theme='void'] {
	--theme-bg-canvas: #000000;
	--theme-bg-card: rgba(20, 20, 30, 0.8);
	--theme-bg-overlay: rgba(30, 25, 45, 0.85);
	--theme-accent: #a855f7;
	--theme-accent-glow: rgba(168, 85, 247, 0.6);
	--theme-accent-rgb: 168, 85, 247;
	--theme-bg-overlay-rgb: 30, 25, 45;
	--theme-gem-ruby: #7f1d1d;
	--theme-gem-sapphire: #4c1d95;
	--theme-gem-emerald: #111827;
	--theme-gem-amethyst: #8b5cf6;
	--theme-gem-topaz: #f0f9ff;
	--theme-text-primary: #f5f5f5;
	--theme-text-secondary: #c4b5fd;
	--theme-text-muted: #8b5cf6;
	--theme-border: rgba(139, 92, 246, 0.15);
	--theme-border-hover: rgba(139, 92, 246, 0.25);
}

/* Ocean - Abyssal depths (kraken-pact, bioluminescence) */
[data-theme='ocean'] {
	--theme-bg-canvas: #042f2e;
	--theme-bg-card: rgba(13, 148, 136, 0.6);
	--theme-bg-overlay: rgba(17, 94, 89, 0.8);
	--theme-accent: #14b8a6;
	--theme-accent-glow: rgba(20, 184, 166, 0.5);
	--theme-accent-rgb: 20, 184, 166;
	--theme-bg-overlay-rgb: 17, 94, 89;
	--theme-gem-ruby: #fb7185;
	--theme-gem-sapphire: #1e3a8a;
	--theme-gem-emerald: #0d9488;
	--theme-gem-amethyst: #5eead4;
	--theme-gem-topaz: #e0f2f1;
	--theme-text-primary: #f0fdfa;
	--theme-text-secondary: #5eead4;
	--theme-text-muted: #2dd4bf;
	--theme-border: rgba(20, 184, 166, 0.15);
	--theme-border-hover: rgba(20, 184, 166, 0.25);
}

/* ========================
   BASE STYLES
   ======================== */

@layer base {
	body {
		background: radial-gradient(circle at 50% 0%, var(--theme-bg-card), var(--theme-bg-canvas));
		background-attachment: fixed;
		min-height: 100vh;
		color: var(--color-text-primary);
		font-family: var(--font-sans);
		-webkit-font-smoothing: antialiased;
		position: relative;
	}

	/* Smooth scrolling for anchor links */
	html {
		scroll-behavior: smooth;
		scroll-padding-top: 100px;
	}

	/* Noise Texture Overlay */
	body::before {
		content: '';
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		pointer-events: none;
		opacity: 0.03;
		background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
		z-index: 9999;
	}

	/* Typography Defaults */
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@apply font-bold tracking-tight text-[var(--color-text-primary)];
	}
}

/* ========================
   COMPONENT STYLES
   ======================== */

@layer components {
	/* The "Aero" Shine */
	.aero-shine {
		background: linear-gradient(
			to right,
			color-mix(in srgb, var(--color-text-primary) 0%, transparent) 0%,
			color-mix(in srgb, var(--color-text-primary) 10%, transparent) 50%,
			color-mix(in srgb, var(--color-text-primary) 0%, transparent) 100%
		);
		background-size: 200% 100%;
		animation: var(--animate-shimmer);
	}

	/* The Crystal Card */
	.card-crystal {
		background-color: var(--color-bg-card);
		backdrop-filter: blur(12px);
		/* 3D effect: top highlight edge + deep shadow */
		box-shadow:
			/* Top highlight edge - light coming from above */
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 20%, transparent),
			/* Subtle side highlights */ inset 1px 0 0
				color-mix(in srgb, var(--color-text-primary) 8%, transparent),
			inset -1px 0 0 color-mix(in srgb, var(--color-text-primary) 8%, transparent),
			/* Deep drop shadow for floating effect */ 0 8px 32px
				color-mix(in srgb, black 60%, transparent),
			/* Thin border for definition */ 0 0 0 1px var(--color-border);
		border-bottom: 1px solid var(--color-border);
		border-radius: 1rem;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.card-crystal:hover {
		/* Enhanced shadow on hover - appears to lift */
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 30%, transparent),
			inset 1px 0 0 color-mix(in srgb, var(--color-text-primary) 12%, transparent),
			inset -1px 0 0 color-mix(in srgb, var(--color-text-primary) 12%, transparent),
			0 12px 48px color-mix(in srgb, black 70%, transparent),
			0 0 0 1px var(--color-border-hover);
		transform: translateY(-2px);
	}

	.card-crystal:active {
		transform: translateY(0);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 18%, transparent),
			0 4px 16px color-mix(in srgb, black 50%, transparent),
			0 0 0 1px var(--color-border);
	}

	/* 3D Card - Compendium spell/item cards with stronger floating effect */
	.card-3d {
		background-color: var(--color-bg-card);
		backdrop-filter: blur(8px);
		/* Strong top highlight + floating shadow */
		box-shadow:
			/* Top edge highlight - key 3D element */
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 25%, transparent),
			/* Side subtle highlights */ inset 1px 0 0
				color-mix(in srgb, var(--color-text-primary) 6%, transparent),
			inset -1px 0 0 color-mix(in srgb, var(--color-text-primary) 6%, transparent),
			/* Soft shadow for depth */ 0 4px 16px color-mix(in srgb, black 50%, transparent),
			0 0 0 1px var(--color-border);
		border-radius: 0.75rem;
		transition: all 0.2s ease;
	}

	.card-3d:hover {
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 35%, transparent),
			inset 1px 0 0 color-mix(in srgb, var(--color-text-primary) 10%, transparent),
			inset -1px 0 0 color-mix(in srgb, var(--color-text-primary) 10%, transparent),
			0 8px 24px color-mix(in srgb, black 60%, transparent),
			0 0 0 1px var(--color-border-hover);
		transform: translateY(-3px);
	}

	/* 3D Button - Strong convex appearance */
	.btn-3d {
		background: linear-gradient(
			180deg,
			color-mix(in srgb, var(--color-text-primary) 12%, var(--color-bg-card)) 0%,
			color-mix(in srgb, var(--color-text-primary) 5%, var(--color-bg-card)) 100%
		);
		box-shadow:
			/* Inner light edge */
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 25%, transparent),
			/* Drop shadow */ 0 3px 6px rgba(0, 0, 0, 0.4),
			/* Border */ 0 0 0 1px var(--color-border);
		border-radius: 0.5rem;
		font-weight: 600;
		transition: all 0.15s ease;
	}

	.btn-3d:hover {
		background: linear-gradient(
			180deg,
			color-mix(in srgb, var(--color-text-primary) 18%, var(--color-bg-card)) 0%,
			color-mix(in srgb, var(--color-text-primary) 8%, var(--color-bg-card)) 100%
		);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 35%, transparent),
			0 5px 12px color-mix(in srgb, black 50%, transparent),
			0 0 0 1px var(--color-border-hover);
		transform: translateY(-1px);
	}

	.btn-3d:active {
		background: linear-gradient(
			180deg,
			color-mix(in srgb, var(--color-text-primary) 6%, var(--color-bg-card)) 0%,
			color-mix(in srgb, var(--color-text-primary) 2%, var(--color-bg-card)) 100%
		);
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 30%, transparent),
			0 1px 3px color-mix(in srgb, black 40%, transparent),
			0 0 0 1px var(--color-border);
		transform: translateY(1px);
	}

	/* Recessed Input - Looks like a slot/well */
	.input-recessed {
		background-color: color-mix(in srgb, black 30%, transparent);
		box-shadow:
			/* Inner shadow creates recessed effect */
			inset 0 2px 4px color-mix(in srgb, black 50%, transparent),
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 5%, transparent),
			/* Subtle border */ 0 0 0 1px var(--color-border);
		border-radius: 0.5rem;
		transition: all 0.2s ease;
	}

	.input-recessed:focus {
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 50%, transparent),
			inset 0 0 0 2px var(--color-accent),
			0 0 0 1px var(--color-border);
		outline: none;
	}

	/* 3D Panel - Floating panel with strong shadow */
	.panel-3d {
		background-color: var(--color-bg-card);
		backdrop-filter: blur(16px);
		box-shadow:
			/* Top highlight */
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 20%, transparent),
			/* Deep shadow for floating effect */ 0 8px 40px color-mix(in srgb, black 60%, transparent),
			0 0 0 1px var(--color-border);
		border-radius: 0.75rem;
	}

	/* The "Gem" Button */
	.btn-gem {
		position: relative;
		overflow: hidden;
		border: none;
		border-radius: 9999px;
		background: linear-gradient(
			180deg,
			var(--color-accent) 0%,
			color-mix(in srgb, var(--color-accent) 70%, black) 100%
		);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, white 40%, transparent),
			0 2px 4px color-mix(in srgb, black 30%, transparent),
			0 0 12px var(--color-accent-glow);
		color: white;
		font-weight: 700;
		text-shadow: 0 -1px 0 color-mix(in srgb, black 50%, transparent);
		transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
		@apply inline-flex cursor-pointer items-center justify-center px-4 py-2;
	}

	.btn-gem:hover {
		filter: brightness(1.1);
		transform: translateY(-1px);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, white 60%, transparent),
			0 4px 12px color-mix(in srgb, black 40%, transparent),
			0 0 20px var(--color-accent-glow);
	}

	.btn-gem:active {
		transform: translateY(1px);
		background: linear-gradient(
			180deg,
			color-mix(in srgb, var(--color-accent) 60%, black) 0%,
			color-mix(in srgb, var(--color-accent) 50%, black) 100%
		);
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 30%, transparent),
			0 0 8px var(--color-accent-glow);
	}

	/* The "Engraved" Panel */
	.panel-inset {
		background: color-mix(in srgb, black 20%, transparent);
		border-radius: 0.75rem;
		box-shadow: inset 0 2px 4px color-mix(in srgb, black 40%, transparent);
		border-bottom: 1px solid var(--color-border);
	}

	/* Text Effects */
	.text-holo {
		text-shadow:
			0 0 12px var(--color-accent-glow),
			0 2px 4px color-mix(in srgb, black 80%, transparent);
	}

	/* Input/Textarea Crystal Inset */
	.input-crystal {
		@apply rounded-xl border border-[var(--color-border)] bg-[color-mix(in_srgb,black_40%,transparent)] text-sm text-[var(--color-text-primary)] transition-all placeholder:text-[var(--color-text-muted)];
		/* Recessed effect with inner shadows */
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 50%, transparent),
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 5%, transparent);
	}

	.input-crystal:focus {
		@apply ring-1 ring-[var(--color-accent)] outline-none;
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 50%, transparent),
			inset 0 0 0 2px var(--color-accent),
			0 0 0 1px var(--color-border);
	}

	/* Smooth scrolling for filter panels */
	.glass-scroll {
		scrollbar-width: thin;
		scrollbar-color: color-mix(in srgb, var(--color-accent) 30%, transparent) transparent;
	}

	.glass-scroll::-webkit-scrollbar {
		width: 6px;
	}

	.glass-scroll::-webkit-scrollbar-track {
		background: transparent;
	}

	.glass-scroll::-webkit-scrollbar-thumb {
		background: color-mix(in srgb, var(--color-accent) 30%, transparent);
		border-radius: 3px;
	}

	.glass-scroll::-webkit-scrollbar-thumb:hover {
		background: color-mix(in srgb, var(--color-accent) 50%, transparent);
	}

	/* Toggle Switch Styles */
	.toggle-track {
		background: rgba(var(--theme-bg-overlay-rgb, 49, 46, 129), 0.6);
		border-color: var(--color-border);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.toggle-track:hover:not(:disabled) {
		border-color: var(--color-border-hover);
	}

	.toggle-track.toggle-checked {
		background: rgba(var(--theme-accent-rgb, 168, 85, 247), 0.4);
		border-color: var(--theme-accent);
	}

	.toggle-thumb {
		background: var(--theme-accent);
		box-shadow: 0 0 10px var(--theme-accent-glow);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.toggle-thumb.translate-x-4 {
		transform: translateX(1.25rem);
	}

	/* ========================
	   ARCANE DASHBOARD - SETTINGS
	   ======================== */

	/* Settings Workspace Background */
	.settings-workspace {
		background:
			radial-gradient(ellipse at 20% 0%, rgba(var(--theme-accent-rgb), 0.12) 0%, transparent 50%),
			radial-gradient(ellipse at 80% 100%, rgba(var(--theme-accent-rgb), 0.08) 0%, transparent 50%),
			radial-gradient(circle at 50% 50%, rgba(var(--theme-accent-rgb), 0.03) 0%, transparent 70%),
			var(--color-bg-canvas);
		min-height: 100%;
		position: relative;
		overflow: hidden;
	}

	/* Animated Magic Particles */
	.settings-workspace::before {
		content: '';
		position: absolute;
		inset: 0;
		background-image:
			radial-gradient(1px 1px at 20% 30%, rgba(var(--theme-accent-rgb), 0.3), transparent),
			radial-gradient(1px 1px at 40% 70%, rgba(var(--theme-accent-rgb), 0.2), transparent),
			radial-gradient(1px 1px at 60% 20%, rgba(var(--theme-accent-rgb), 0.25), transparent),
			radial-gradient(1px 1px at 80% 60%, rgba(var(--theme-accent-rgb), 0.2), transparent),
			radial-gradient(1px 1px at 90% 40%, rgba(var(--theme-accent-rgb), 0.15), transparent);
		background-size: 200% 200%;
		animation: arcane-particles 15s ease-in-out infinite;
		pointer-events: none;
		z-index: 0;
	}

	@keyframes arcane-particles {
		0%,
		100% {
			background-position: 0% 0%;
			opacity: 0.6;
		}
		50% {
			background-position: 100% 100%;
			opacity: 1;
		}
	}

	/* Arcane Panel - Instrument Panel Style */
	.arcane-panel {
		background: color-mix(in srgb, var(--color-bg-card) 80%, transparent);
		backdrop-filter: blur(16px);
		border: 1px solid var(--color-border);
		border-radius: 1rem;
		position: relative;
		overflow: hidden;
		/* Bezel effect */
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 15%, transparent),
			0 4px 24px color-mix(in srgb, black 40%, transparent),
			0 0 0 1px var(--color-border);
		animation: arcane-materialize 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
		opacity: 0;
	}

	/* Decorative header bar */
	.arcane-panel::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 3px;
		background: linear-gradient(90deg, transparent, var(--color-accent), transparent);
		opacity: 0.6;
	}

	/* Corner accents */
	.arcane-panel::after {
		content: '';
		position: absolute;
		top: 8px;
		right: 8px;
		width: 12px;
		height: 12px;
		border-top: 2px solid color-mix(in srgb, var(--color-accent) 50%, transparent);
		border-right: 2px solid color-mix(in srgb, var(--color-accent) 50%, transparent);
		border-radius: 0 4px 0 0;
	}

	@keyframes arcane-materialize {
		0% {
			opacity: 0;
			transform: translateY(20px) scale(0.96);
			filter: blur(8px);
		}
		100% {
			opacity: 1;
			transform: translateY(0) scale(1);
			filter: blur(0);
		}
	}

	/* Panel header styling */
	.arcane-panel-header {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		padding: 1.25rem 1.5rem 0.5rem;
	}

	.arcane-panel-icon {
		width: 2.5rem;
		height: 2.5rem;
		border-radius: 0.625rem;
		background: color-mix(in srgb, var(--color-accent) 15%, transparent);
		border: 1px solid color-mix(in srgb, var(--color-accent) 30%, transparent);
		display: flex;
		align-items: center;
		justify-content: center;
		color: var(--color-accent);
		box-shadow:
			0 0 12px color-mix(in srgb, var(--color-accent) 20%, transparent),
			inset 0 1px 0 color-mix(in srgb, var(--color-accent) 20%, transparent);
	}

	.arcane-panel-title {
		font-size: 0.875rem;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.1em;
		color: var(--color-text-primary);
	}

	.arcane-panel-description {
		font-size: 0.75rem;
		color: var(--color-text-secondary);
		margin-top: 0.25rem;
	}

	.arcane-panel-content {
		padding: 0.75rem 1.5rem 1.5rem;
	}

	/* Runic Row - Settings Item */
	.runic-row {
		display: flex;
		align-items: center;
		gap: 0.875rem;
		padding: 0.875rem 0;
		position: relative;
	}

	/* Runic indicator */
	.runic-indicator {
		width: 1.75rem;
		height: 1.75rem;
		display: flex;
		align-items: center;
		justify-content: center;
		color: var(--color-text-muted);
		transition: all 0.3s ease;
	}

	.runic-row:hover .runic-indicator {
		color: var(--color-accent);
		text-shadow: 0 0 8px var(--color-accent-glow);
	}

	.runic-text {
		flex: 1;
		min-width: 0;
	}

	.runic-label {
		display: block;
		font-size: 0.875rem;
		font-weight: 500;
		color: var(--color-text-primary);
		transition: color 0.2s ease;
	}

	.runic-row:hover .runic-label {
		color: var(--color-accent);
	}

	.runic-description {
		display: block;
		font-size: 0.75rem;
		color: var(--color-text-secondary);
		margin-top: 0.125rem;
	}

	.runic-control {
		flex-shrink: 0;
	}

	/* Enhanced decorative divider */
	.runic-divider {
		height: 1px;
		background: linear-gradient(90deg, transparent, var(--color-border), transparent);
		position: relative;
		margin: 0;
	}

	.runic-divider::before {
		content: '';
		position: absolute;
		left: 50%;
		top: -1px;
		width: 4px;
		height: 3px;
		background: var(--color-accent);
		border-radius: 2px;
		transform: translateX(-50%);
		opacity: 0.5;
	}

	/* Runic Seal Toggle */
	.runic-seal {
		width: 2.25rem;
		height: 2.25rem;
		border-radius: 50%;
		background: color-mix(in srgb, black 30%, transparent);
		border: 2px solid var(--color-border);
		display: flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		position: relative;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		color: var(--color-text-muted);
	}

	.runic-seal:hover:not(:disabled) {
		border-color: color-mix(in srgb, var(--color-accent) 50%, transparent);
		transform: scale(1.05);
	}

	.runic-seal:disabled {
		opacity: 0.5;
		cursor: not-allowed;
	}

	.runic-seal[data-state='checked'] {
		background: color-mix(in srgb, var(--color-accent) 20%, transparent);
		border-color: var(--color-accent);
		color: var(--color-accent);
		box-shadow:
			0 0 12px color-mix(in srgb, var(--color-accent) 30%, transparent),
			inset 0 0 8px color-mix(in srgb, var(--color-accent) 15%, transparent);
		animation: rune-activate 0.3s ease-out;
	}

	@keyframes rune-activate {
		0% {
			transform: scale(1);
		}
		50% {
			transform: scale(1.15);
		}
		100% {
			transform: scale(1);
		}
	}

	/* Energy ring around active seal */
	.runic-seal::after {
		content: '';
		position: absolute;
		inset: -4px;
		border-radius: 50%;
		border: 1px solid transparent;
		background: conic-gradient(from 0deg, var(--color-accent), transparent, var(--color-accent));
		opacity: 0;
		mask: radial-gradient(circle, transparent 60%, black 61%);
		-webkit-mask: radial-gradient(circle, transparent 60%, black 61%);
		animation: energy-flow 1.5s linear infinite;
	}

	.runic-seal[data-state='checked']::after {
		opacity: 0.4;
	}

	@keyframes energy-flow {
		0% {
			transform: rotate(0deg);
		}
		100% {
			transform: rotate(360deg);
		}
	}

	/* Runestone Card */
	.runestone {
		position: relative;
		background: linear-gradient(
			145deg,
			color-mix(in srgb, var(--color-bg-card) 80%, transparent) 0%,
			color-mix(in srgb, black 20%, transparent) 100%
		);
		border: 1px solid var(--color-border);
		border-radius: 0.75rem;
		padding: 0.75rem 1rem;
		cursor: pointer;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		text-align: left;
		overflow: hidden;
	}

	/* Chiseled edge effect */
	.runestone::before {
		content: '';
		position: absolute;
		inset: 0;
		border-radius: 0.75rem;
		padding: 1px;
		background: linear-gradient(
			145deg,
			color-mix(in srgb, var(--color-text-primary) 20%, transparent),
			transparent 50%,
			color-mix(in srgb, black 30%, transparent)
		);
		-webkit-mask:
			linear-gradient(#fff 0 0) content-box,
			linear-gradient(#fff 0 0);
		mask:
			linear-gradient(#fff 0 0) content-box,
			linear-gradient(#fff 0 0);
		-webkit-mask-composite: xor;
		mask-composite: exclude;
		pointer-events: none;
	}

	.runestone:hover {
		transform: translateY(-2px);
		border-color: var(--color-border-hover);
	}

	.runestone[data-state='selected'] {
		background: linear-gradient(
			145deg,
			color-mix(in srgb, var(--color-accent) 12%, transparent) 0%,
			color-mix(in srgb, var(--color-accent) 5%, transparent) 100%
		);
		border-color: var(--color-accent);
		box-shadow:
			0 4px 16px color-mix(in srgb, var(--color-accent) 25%, transparent),
			inset 0 0 12px color-mix(in srgb, var(--color-accent) 8%, transparent);
	}

	.runestone[data-state='selected']::before {
		background: linear-gradient(
			145deg,
			color-mix(in srgb, var(--color-accent) 40%, transparent),
			transparent 50%,
			color-mix(in srgb, var(--color-accent) 40%, transparent)
		);
	}

	/* Selection aura */
	.runestone[data-state='selected']::after {
		content: '';
		position: absolute;
		inset: -2px;
		border-radius: 0.875rem;
		border: 1px solid var(--color-accent);
		opacity: 0.3;
		animation: aura-pulse 2s ease-in-out infinite;
	}

	@keyframes aura-pulse {
		0%,
		100% {
			opacity: 0.2;
			transform: scale(1);
		}
		50% {
			opacity: 0.4;
			transform: scale(1.02);
		}
	}

	.runestone-content {
		display: flex;
		align-items: center;
		gap: 0.625rem;
		position: relative;
		z-index: 1;
	}

	.runestone-rune {
		width: 1.5rem;
		height: 1.5rem;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 0.75rem;
		color: var(--color-text-muted);
		transition: all 0.3s ease;
	}

	.runestone[data-state='selected'] .runestone-rune {
		color: var(--color-accent);
		text-shadow: 0 0 8px var(--color-accent-glow);
	}

	.runestone-label {
		flex: 1;
	}

	.runestone-label-text {
		display: block;
		font-size: 0.8125rem;
		font-weight: 500;
		color: var(--color-text-primary);
	}

	.runestone[data-state='selected'] .runestone-label-text {
		color: var(--color-accent);
	}

	.runestone-label-desc {
		display: block;
		font-size: 0.6875rem;
		color: var(--color-text-secondary);
		margin-top: 0.125rem;
	}

	/* Theme Nexus - Orbital Theme Selector */
	.theme-nexus {
		position: relative;
		width: 100%;
		max-width: 280px;
		height: 280px;
		margin: 0 auto;
	}

	.theme-nexus-center {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 80px;
		height: 80px;
		border-radius: 50%;
		background: radial-gradient(
			circle at 30% 30%,
			color-mix(in srgb, var(--color-accent) 30%, transparent),
			color-mix(in srgb, var(--color-accent) 10%, transparent)
		);
		border: 2px solid var(--color-accent);
		box-shadow:
			0 0 24px color-mix(in srgb, var(--color-accent) 30%, transparent),
			inset 0 0 16px color-mix(in srgb, var(--color-accent) 20%, transparent);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 2;
		cursor: pointer;
		transition: all 0.3s ease;
	}

	.theme-nexus-center:hover {
		transform: translate(-50%, -50%) scale(1.05);
		box-shadow:
			0 0 32px color-mix(in srgb, var(--color-accent) 40%, transparent),
			inset 0 0 20px color-mix(in srgb, var(--color-accent) 25%, transparent);
	}

	.theme-nexus-orb {
		position: absolute;
		top: 50%;
		left: 50%;
		width: 48px;
		height: 48px;
		border-radius: 50%;
		background: color-mix(in srgb, var(--color-bg-card) 90%, transparent);
		border: 1px solid var(--color-border);
		display: flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		transition: all 0.3s ease;
		z-index: 3;
	}

	.theme-nexus-orb:hover {
		border-color: var(--color-accent);
		transform: scale(1.15);
		box-shadow: 0 0 16px color-mix(in srgb, var(--color-accent) 25%, transparent);
	}

	.theme-nexus-orb[data-active='true'] {
		border-color: var(--color-accent);
		background: color-mix(in srgb, var(--color-accent) 15%, transparent);
		box-shadow:
			0 0 12px color-mix(in srgb, var(--color-accent) 30%, transparent),
			inset 0 0 8px color-mix(in srgb, var(--color-accent) 15%, transparent);
	}

	.theme-nexus-orb-preview {
		width: 24px;
		height: 24px;
		border-radius: 50%;
		border: 1px solid rgba(255, 255, 255, 0.2);
	}

	.theme-nexus-ring {
		position: absolute;
		top: 50%;
		left: 50%;
		width: 220px;
		height: 220px;
		border-radius: 50%;
		border: 1px dashed var(--color-border);
		transform: translate(-50%, -50%);
		opacity: 0.5;
	}

	/* Section header decorative style */
	.settings-section-header {
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	.settings-section-header h2 {
		font-size: 0.75rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.15em;
		color: var(--color-text-primary);
		margin: 0;
	}

	.settings-section-header::after {
		content: '';
		flex: 1;
		height: 1px;
		background: linear-gradient(90deg, var(--color-border), transparent);
	}
}

/* ========================
   UTILITY CLASSES
   ======================== */

@layer utilities {
	/* Theme-aware text colors */
	.text-theme-primary {
		color: var(--color-text-primary);
	}

	.text-theme-secondary {
		color: var(--color-text-secondary);
	}

	.text-theme-muted {
		color: var(--color-text-muted);
	}

	/* Theme-aware background colors */
	.bg-theme-canvas {
		background-color: var(--color-bg-canvas);
	}

	.bg-theme-card {
		background-color: var(--color-bg-card);
	}

	.bg-theme-overlay {
		background-color: var(--color-bg-overlay);
	}

	/* Theme-aware border */
	.border-theme {
		border-color: var(--color-border);
	}

	.border-theme-hover:hover {
		border-color: var(--color-border-hover);
	}

	/* Theme accent colors */
	.text-accent {
		color: var(--color-accent);
	}

	.bg-accent {
		background-color: var(--color-accent);
	}

	.ring-accent {
		--tw-ring-color: var(--color-accent);
	}
}
