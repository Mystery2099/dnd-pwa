@import 'tailwindcss';
@plugin '@tailwindcss/forms';
@plugin 'tailwind-scrollbar';

@theme {
	--font-sans:
		'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue',
		Arial, sans-serif;

	/* Gem Colors (with default fallbacks) */
	--color-gem-ruby: var(--theme-gem-ruby, #f472b6);
	--color-gem-sapphire: var(--theme-gem-sapphire, #38bdf8);
	--color-gem-emerald: var(--theme-gem-emerald, #4ade80);
	--color-gem-amethyst: var(--theme-gem-amethyst, #c084fc);
	--color-gem-topaz: var(--theme-gem-topaz, #fbbf24);
	--color-gem-pearl: var(--theme-gem-pearl, #f8fafc);

	/* Semantic theme colors */
	--color-bg-canvas: var(--theme-bg-canvas);
	--color-bg-card: var(--theme-bg-card);
	--color-bg-overlay: var(--theme-bg-overlay);
	--color-accent: var(--theme-accent);
	--color-accent-glow: var(--theme-accent-glow);
	--color-text-primary: var(--theme-text-primary);
	--color-text-secondary: var(--theme-text-secondary);
	--color-text-muted: var(--theme-text-muted);
	--color-text-inverted: var(--theme-text-inverted, #ffffff);
	--color-border: var(--theme-border);
	--color-border-hover: var(--theme-border-hover);
	--color-shadow: var(--theme-shadow, rgba(0, 0, 0, 0.5));
	--color-overlay-light: var(--theme-overlay-light, rgba(255, 255, 255, 0.1));
	--color-overlay-dark: var(--theme-overlay-dark, rgba(0, 0, 0, 0.3));

	/* Typography */
	--font-display: var(--theme-font-display);
	--font-body: var(--theme-font-body);

	/* Animation */
	--ease-smooth: var(--theme-ease-smooth, cubic-bezier(0.4, 0, 0.2, 1));
	--duration-fast: var(--theme-duration-fast, 150ms);
	--duration-slow: var(--theme-duration-slow, 300ms);

	/* Visual Effects */
	--noise-opacity: var(--theme-noise-opacity, 0.03);
	--border-separator: var(--theme-border-separator, none);

	/* Animations */
	--animate-shimmer: shimmer 3s linear infinite;
	--animate-float: float 6s ease-in-out infinite;
	--animate-enter: slide-up-fade 0.5s cubic-bezier(0.16, 1, 0.3, 1);
	--animate-pulse-slow: pulse-glow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
	--animate-fade-in: fade-in 0.2s ease-out;
	--animate-arcane-particles: arcane-particles 15s ease-in-out infinite;
	--animate-arcane-materialize: arcane-materialize 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
	--animate-rune-activate: rune-activate 0.3s ease-out;
	--animate-energy-flow: energy-flow 1.5s linear infinite;
	--animate-aura-pulse: aura-pulse 2s ease-in-out infinite;

	@keyframes shimmer {
		0% {
			background-position: 200% 0;
		}
		100% {
			background-position: -200% 0;
		}
	}

	@keyframes float {
		0%,
		100% {
			transform: translateY(0);
		}
		50% {
			transform: translateY(-6px);
		}
	}

	@keyframes slide-up-fade {
		0% {
			opacity: 0;
			transform: translateY(12px);
		}
		100% {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@keyframes pulse-glow {
		0%,
		100% {
			opacity: 1;
			box-shadow: 0 0 12px var(--color-accent-glow);
		}
		50% {
			opacity: 0.8;
			box-shadow: 0 0 20px var(--color-accent-glow);
		}
	}

	@keyframes fade-in {
		from {
			opacity: 0;
			transform: translateY(4px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@keyframes arcane-particles {
		0%,
		100% {
			background-position: 0% 0%;
			opacity: 0.6;
		}
		50% {
			background-position: 100% 100%;
			opacity: 1;
		}
	}

	@keyframes arcane-materialize {
		0% {
			opacity: 0;
			transform: translateY(20px) scale(0.96);
			filter: blur(8px);
		}
		100% {
			opacity: 1;
			transform: translateY(0) scale(1);
			filter: blur(0);
		}
	}

	@keyframes rune-activate {
		0% {
			transform: scale(1);
		}
		50% {
			transform: scale(1.15);
		}
		100% {
			transform: scale(1);
		}
	}

	@keyframes energy-flow {
		0% {
			transform: rotate(0deg);
		}
		100% {
			transform: rotate(360deg);
		}
	}

	@keyframes aura-pulse {
		0%,
		100% {
			opacity: 0.2;
			transform: scale(1);
		}
		50% {
			opacity: 0.4;
			transform: scale(1.02);
		}
	}
}

/* ========================
   THEME DEFINITIONS
   ========================

   NOTE: Theme definitions are now maintained in:
   /src/lib/core/client/builtinThemes.ts

   Built-in themes are defined in builtinThemes.ts and injected at runtime.
   For built-in themes, CSS is already defined below for instant loading.
   User-imported and user-created themes are injected via JavaScript.

   ======================================= */

/* Amethyst - Deep mystical purple (default) */
:root,
[data-theme='amethyst'] {
	--theme-bg-canvas: #0f172a;
	--theme-bg-card: rgba(30, 27, 75, 0.6);
	--theme-bg-overlay: rgba(49, 46, 129, 0.8);
	--theme-accent: #a855f7;
	--theme-accent-glow: rgba(168, 85, 247, 0.5);
	--theme-accent-rgb: 168, 85, 247;
	--theme-bg-overlay-rgb: 49, 46, 129;
	--theme-gem-ruby: #f472b6;
	--theme-gem-sapphire: #38bdf8;
	--theme-gem-emerald: #4ade80;
	--theme-gem-amethyst: #c084fc;
	--theme-gem-topaz: #fbbf24;
	--theme-text-primary: #f8fafc;
	--theme-text-secondary: #94a3b8;
	--theme-text-muted: #94a3b8;
	--theme-text-inverted: #ffffff;
	--theme-shadow: rgba(0, 0, 0, 0.5);
	--theme-overlay-light: rgba(255, 255, 255, 0.1);
	--theme-overlay-dark: rgba(0, 0, 0, 0.3);
	--theme-border: rgba(255, 255, 255, 0.15);
	--theme-border-hover: rgba(255, 255, 255, 0.3);
	--theme-effect-url: '';

	/* Typography */
	--theme-font-display: 'Quicksand', system-ui, sans-serif;
	--theme-font-body: 'Inter', system-ui, sans-serif;

	/* Animation */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 150ms;
	--theme-duration-slow: 300ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.03;
	--theme-border-separator: none;
}

/* Arcane - Gold runes on dark leather */
[data-theme='arcane'] {
	--theme-bg-canvas: #271c19; /* Dark Espresso Leather */
	--theme-bg-card: rgba(66, 32, 6, 0.5); /* Amber glass */
	--theme-bg-overlay: rgba(120, 53, 15, 0.6);

	/* Accent: Golden Amber */
	--theme-accent: #fbbf24;
	--theme-accent-glow: rgba(251, 191, 36, 0.5);
	--theme-accent-rgb: 251, 191, 36;
	--theme-bg-overlay-rgb: 120, 53, 15;

	/* Text: Parchment/Papyrus */
	--theme-text-primary: #fef3c7; /* Amber-100 */
	--theme-text-secondary: #fcd34d; /* Amber-300 */
	--theme-text-muted: #fbbf24;
	--theme-text-inverted: #fef3c7;
	--theme-shadow: rgba(0, 0, 0, 0.6);
	--theme-overlay-light: rgba(254, 243, 199, 0.08);
	--theme-overlay-dark: rgba(0, 0, 0, 0.4);

	/* Border: Gold leaf */
	--theme-border: rgba(251, 191, 36, 0.2);
	--theme-border-hover: rgba(251, 191, 36, 0.5);

	/* Typography */
	--theme-font-display: 'Cinzel', Georgia, serif;
	--theme-font-body: 'Cormorant Garamond', Georgia, serif;

	/* Animation - Elegant, slower transitions */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 200ms;
	--theme-duration-slow: 400ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.02;
	--theme-border-separator: linear-gradient(90deg, transparent, var(--theme-accent), transparent);
}

/* Nature - Bioluminescence in the dark */
[data-theme='nature'] {
	--theme-bg-canvas: #022c22; /* Very deep jungle night */
	--theme-bg-card: rgba(6, 78, 59, 0.5); /* Deep moss glass */
	--theme-bg-overlay: rgba(6, 95, 70, 0.7);

	/* Accent: Spring Green / Neon Leaf */
	--theme-accent: #4ade80;
	--theme-accent-glow: rgba(74, 222, 128, 0.5);
	--theme-accent-rgb: 74, 222, 128;
	--theme-bg-overlay-rgb: 6, 95, 70;

	/* Text: Pale Mint */
	--theme-text-primary: #f0fdf4;
	--theme-text-secondary: #86efac;
	--theme-text-muted: #6ee7b7;
	--theme-text-inverted: #f0fdf4;
	--theme-shadow: rgba(0, 0, 0, 0.5);
	--theme-overlay-light: rgba(255, 255, 255, 0.08);
	--theme-overlay-dark: rgba(0, 0, 0, 0.4);

	/* Border: Vine-like */
	--theme-border: rgba(134, 239, 172, 0.15);
	--theme-border-hover: rgba(74, 222, 128, 0.4);

	/* Typography */
	--theme-font-display: 'DM Serif Display', Georgia, serif;
	--theme-font-body: 'DM Sans', system-ui, sans-serif;

	/* Animation - Organic, breathing feel */
	--theme-ease-smooth: cubic-bezier(0.34, 1.56, 0.64, 1);
	--theme-duration-fast: 200ms;
	--theme-duration-slow: 500ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.025;
	--theme-border-separator: none;
}

/* Fire - Magma flowing over cold stone */
[data-theme='fire'] {
	--theme-bg-canvas: #1c1917; /* Warm Dark Stone */
	--theme-bg-card: rgba(41, 37, 36, 0.6); /* Semi-transparent Ash */
	--theme-bg-overlay: rgba(68, 64, 60, 0.7);

	/* Accent: Blazing Orange/Red */
	--theme-accent: #f97316;
	--theme-accent-glow: rgba(249, 115, 22, 0.5);
	--theme-accent-rgb: 249, 115, 22;
	--theme-bg-overlay-rgb: 68, 64, 60;

	/* Text: Hot White/Peach */
	--theme-text-primary: #fff7ed;
	--theme-text-secondary: #fdba74; /* Orange-300 */
	--theme-text-muted: #d6d3d1;
	--theme-text-inverted: #fff7ed;
	--theme-shadow: rgba(0, 0, 0, 0.5);
	--theme-overlay-light: rgba(255, 255, 255, 0.08);
	--theme-overlay-dark: rgba(0, 0, 0, 0.4);

	/* Border: Embers */
	--theme-border: rgba(253, 186, 116, 0.15);
	--theme-border-hover: rgba(249, 115, 22, 0.4);

	/* Typography */
	--theme-font-display: 'Teko', system-ui, sans-serif;
	--theme-font-body: 'Rajdhani', system-ui, sans-serif;

	/* Animation - Intense, explosive */
	--theme-ease-smooth: cubic-bezier(0.68, -0.55, 0.265, 1.55);
	--theme-duration-fast: 100ms;
	--theme-duration-slow: 250ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.04;
	--theme-border-separator: linear-gradient(90deg, transparent, var(--theme-accent), transparent);
}

/* Ice - Deep freeze */
[data-theme='ice'] {
	--theme-bg-canvas: #082f49; /* Deep Sky Dark */
	--theme-bg-card: rgba(12, 74, 110, 0.6);
	--theme-bg-overlay: rgba(7, 89, 133, 0.7);

	/* Accent: Cyan Ice */
	--theme-accent: #67e8f9;
	--theme-accent-glow: rgba(103, 232, 249, 0.5);
	--theme-accent-rgb: 103, 232, 249;
	--theme-bg-overlay-rgb: 7, 89, 133;

	/* Text: Frosty White/Blue */
	--theme-text-primary: #f0f9ff;
	--theme-text-secondary: #bae6fd;
	--theme-text-muted: #38bdf8;
	--theme-text-inverted: #f0f9ff;
	--theme-shadow: rgba(0, 0, 0, 0.5);
	--theme-overlay-light: rgba(255, 255, 255, 0.1);
	--theme-overlay-dark: rgba(0, 0, 0, 0.4);

	/* Border: Icicle sharp */
	--theme-border: rgba(186, 230, 253, 0.15);
	--theme-border-hover: rgba(103, 232, 249, 0.5);

	/* Typography */
	--theme-font-display: 'Outfit', system-ui, sans-serif;
	--theme-font-body: 'Inter', system-ui, sans-serif;

	/* Animation - Crisp, crystalline */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 120ms;
	--theme-duration-slow: 280ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.015;
	--theme-border-separator: none;
}

/* Void - Cosmic emptiness */
[data-theme='void'] {
	--theme-bg-canvas: #0a0a0a; /* Almost Pure Black */
	--theme-bg-card: rgba(23, 23, 23, 0.8); /* Neutral Zinc */
	--theme-bg-overlay: rgba(38, 38, 38, 0.8);

	/* Accent: Electric Violet */
	--theme-accent: #c084fc;
	--theme-accent-glow: rgba(192, 132, 252, 0.6);
	--theme-accent-rgb: 192, 132, 252;
	--theme-bg-overlay-rgb: 38, 38, 38;

	/* Text: Silver & Ghost Purple */
	--theme-text-primary: #fafafa;
	--theme-text-secondary: #e9d5ff; /* Purple-200 */
	--theme-text-muted: #a855f7;
	--theme-text-inverted: #fafafa;
	--theme-shadow: rgba(0, 0, 0, 0.6);
	--theme-overlay-light: rgba(255, 255, 255, 0.06);
	--theme-overlay-dark: rgba(0, 0, 0, 0.5);

	/* Border: Faint nebulae */
	--theme-border: rgba(192, 132, 252, 0.15);
	--theme-border-hover: rgba(192, 132, 252, 0.4);

	/* Typography */
	--theme-font-display: 'Space Grotesk', system-ui, sans-serif;
	--theme-font-body: 'Inter', system-ui, sans-serif;

	/* Animation - Ethereal, floating */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 200ms;
	--theme-duration-slow: 500ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.035;
	--theme-border-separator: none;
}

/* Ocean - Mariana Trench */
[data-theme='ocean'] {
	--theme-bg-canvas: #020617; /* Slate-950 (Ink Blue) */
	--theme-bg-card: rgba(30, 41, 59, 0.6);
	--theme-bg-overlay: rgba(15, 23, 42, 0.8);

	/* Accent: Deep Sea Teal */
	--theme-accent: #14b8a6;
	--theme-accent-glow: rgba(20, 184, 166, 0.5);
	--theme-accent-rgb: 20, 184, 166;
	--theme-bg-overlay-rgb: 15, 23, 42;

	/* Text: Pale Aqua */
	--theme-text-primary: #f0fdfa;
	--theme-text-secondary: #5eead4;
	--theme-text-muted: #14b8a6;
	--theme-text-inverted: #f0fdfa;
	--theme-shadow: rgba(0, 0, 0, 0.5);
	--theme-overlay-light: rgba(255, 255, 255, 0.06);
	--theme-overlay-dark: rgba(0, 0, 0, 0.5);

	/* Border: Saltwater */
	--theme-border: rgba(94, 234, 212, 0.1);
	--theme-border-hover: rgba(20, 184, 166, 0.4);

	/* Typography */
	--theme-font-display: 'Montserrat', system-ui, sans-serif;
	--theme-font-body: 'Inter', system-ui, sans-serif;

	/* Animation - Flowing, fluid */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 180ms;
	--theme-duration-slow: 350ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.02;
	--theme-border-separator: none;
}

[data-theme='beach'] {
	/* Canvas: Dark, wet compacted sand (Warm Earth) */
	--theme-bg-canvas: #292524;

	/* Cards: Translucent bronze/mud */
	--theme-bg-card: rgba(69, 58, 43, 0.6);
	--theme-bg-overlay: rgba(87, 76, 60, 0.7);

	/* Accent: The Ocean Waves (Electric Cyan) */
	/* This provides the high contrast "Water" element */
	--theme-accent: #22d3ee;
	--theme-accent-glow: rgba(34, 211, 238, 0.5);
	--theme-accent-rgb: 34, 211, 238;

	/* Overlay tint */
	--theme-bg-overlay-rgb: 87, 76, 60;

	/* Gems: Tropical/Reef colors */
	--theme-gem-ruby: #fb7185; /* Coral */
	--theme-gem-sapphire: #0ea5e9; /* Deep Water */
	--theme-gem-emerald: #14b8a6; /* Seaweed */
	--theme-gem-amethyst: #a78bfa; /* Seashell */
	--theme-gem-topaz: #facc15; /* Sun */

	/* TEXT: The "Dry Sand" Effect */
	/* Primary: Very pale, warm beige (Orange-50ish) */
	--theme-text-primary: #fff7ed;
	/* Secondary: Light Tan (Orange-200ish) */
	--theme-text-secondary: #fed7aa;
	/* Muted: Warm Earthy Grey */
	--theme-text-muted: #d6d3d1;
	--theme-text-inverted: #fff7ed;
	--theme-shadow: rgba(0, 0, 0, 0.5);
	--theme-overlay-light: rgba(255, 255, 255, 0.08);
	--theme-overlay-dark: rgba(0, 0, 0, 0.4);

	/* Border: Sandy ridge with Water hover */
	--theme-border: rgba(254, 215, 170, 0.15); /* Low opacity tan */
	--theme-border-hover: rgba(34, 211, 238, 0.4); /* Cyan water glow */
	--theme-effect-url: '';

	/* Typography */
	--theme-font-display: 'Bebas Neue', system-ui, sans-serif;
	--theme-font-body: 'Nunito', system-ui, sans-serif;

	/* Animation - Relaxed, beachy */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 200ms;
	--theme-duration-slow: 400ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.015;
	--theme-border-separator: none;
}

/* Necropolis - Bone & Spirit */
[data-theme='necropolis'] {
	/* Canvas: Cold Crypt Stone */
	--theme-bg-canvas: #1c1917;

	/* Cards: Darker tomb slab */
	--theme-bg-card: rgba(28, 25, 23, 0.8);
	--theme-bg-overlay: rgba(41, 37, 36, 0.8);

	/* Accent: Necrotic Green (Sickly Lime) */
	--theme-accent: #84cc16;
	--theme-accent-glow: rgba(132, 204, 22, 0.5);
	--theme-accent-rgb: 132, 204, 22;
	--theme-bg-overlay-rgb: 41, 37, 36;

	/* Text: Old Bone */
	--theme-text-primary: #e5e5e5;
	--theme-text-secondary: #a3a3a3;
	--theme-text-muted: #a3a3a3;
	--theme-text-inverted: #e5e5e5;
	--theme-shadow: rgba(0, 0, 0, 0.6);
	--theme-overlay-light: rgba(255, 255, 255, 0.05);
	--theme-overlay-dark: rgba(0, 0, 0, 0.5);

	/* Border: Cracked Stone */
	--theme-border: rgba(82, 82, 82, 0.3);
	--theme-border-hover: rgba(132, 204, 22, 0.5);
	--theme-effect-url: '';

	/* Typography */
	--theme-font-display: 'Crimson Text', Georgia, serif;
	--theme-font-body: 'Inter', system-ui, sans-serif;

	/* Animation - Slow, haunting */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 250ms;
	--theme-duration-slow: 600ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.04;
	--theme-border-separator: none;
}

/* Charmed - Rose Quartz & Love Potion */
[data-theme='charmed'] {
	/* Canvas: Deep Plum to Rose gradient */
	--theme-bg-canvas: #4a044e; /* Fallback */
	--theme-bg-card: rgba(131, 24, 67, 0.5); /* Pink-900 glass */
	--theme-bg-overlay: rgba(80, 7, 36, 0.8);

	/* Accent: Hot Pink (Rose-400) */
	--theme-accent: #f472b6;
	--theme-accent-rgb: 244, 114, 182; /* REQUIRED for component transparency */
	--theme-accent-glow: rgba(244, 114, 182, 0.5);

	/* Overlay Tint: Dark Rose */
	--theme-bg-overlay-rgb: 80, 7, 36;

	/* Gems */
	--theme-gem-ruby: #f472b6;
	--theme-gem-sapphire: #60a5fa;
	--theme-gem-emerald: #34d399;
	--theme-gem-amethyst: #c084fc;
	--theme-gem-topaz: #fbbf24;

	/* Text: Soft Pink/White */
	--theme-text-primary: #fff1f2;
	--theme-text-secondary: #fda4af;
	--theme-text-muted: #f472b6;
	--theme-text-inverted: #fff1f2;

	/* Shadows */
	--theme-shadow: rgba(80, 7, 36, 0.6);
	--theme-overlay-light: rgba(255, 255, 255, 0.15);
	--theme-overlay-dark: rgba(0, 0, 0, 0.4);

	/* Border: Soft Pink Glass */
	--theme-border: rgba(244, 114, 182, 0.2);
	--theme-border-hover: rgba(244, 114, 182, 0.5);
	--theme-effect-url: '';

	/* Typography */
	--theme-font-display: 'Quicksand', system-ui, sans-serif;
	--theme-font-body: 'Nunito', system-ui, sans-serif;

	/* Animation */
	--theme-ease-smooth: cubic-bezier(0.34, 1.56, 0.64, 1); /* Bouncy */
	--theme-duration-fast: 200ms;
	--theme-duration-slow: 400ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.02;
	--theme-border-separator: none;
}

/* Divine - Celestial Bronze */
[data-theme='divine'] {
	/* Canvas: Sunburst in the void */
	--theme-bg-canvas: #271a0c;
	/* Card: Bronze/Amber Glass */
	--theme-bg-card: rgba(66, 32, 6, 0.6);
	--theme-bg-overlay: rgba(30, 20, 10, 0.9);

	/* Accent: Holy Gold (Yellow-400) */
	--theme-accent: #facc15;
	--theme-accent-rgb: 250, 204, 21; /* REQUIRED */
	--theme-accent-glow: rgba(250, 204, 21, 0.6);

	/* Overlay Tint: Dark Bronze */
	--theme-bg-overlay-rgb: 66, 32, 6;

	/* Gems */
	--theme-gem-ruby: #ef4444;
	--theme-gem-sapphire: #3b82f6;
	--theme-gem-emerald: #10b981;
	--theme-gem-amethyst: #a855f7;
	--theme-gem-topaz: #facc15;

	/* Text: Regal */
	--theme-text-primary: #fefce8; /* Yellow-50 */
	--theme-text-secondary: #fde047; /* Yellow-300 */
	--theme-text-muted: #fbbf24;
	--theme-text-inverted: #422006;

	/* Shadows */
	--theme-shadow: rgba(0, 0, 0, 0.7);
	--theme-overlay-light: rgba(254, 240, 138, 0.1);
	--theme-overlay-dark: rgba(0, 0, 0, 0.5);

	/* Border: Polished Gold */
	--theme-border: rgba(250, 204, 21, 0.25);
	--theme-border-hover: rgba(250, 204, 21, 0.6);
	--theme-effect-url: '';

	/* Typography */
	--theme-font-display: 'Cinzel', serif;
	--theme-font-body: 'Lato', sans-serif;

	/* Animation */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 200ms;
	--theme-duration-slow: 500ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.01; /* Very polished/clean */
	--theme-border-separator: linear-gradient(90deg, transparent, var(--theme-accent), transparent);
}
/* Underdark - Deep Slate & Spore */
[data-theme='underdark'] {
	/* Canvas: Absolute Pitch Black/Slate */
	--theme-bg-canvas: #020617;
	/* Card: Heavy Slate Stone (High Opacity) */
	--theme-bg-card: rgba(15, 23, 42, 0.85);
	--theme-bg-overlay: rgba(2, 6, 23, 0.95);

	/* Accent: Bioluminescent Indigo */
	--theme-accent: #818cf8;
	--theme-accent-rgb: 129, 140, 248; /* REQUIRED */
	--theme-accent-glow: rgba(129, 140, 248, 0.4);

	/* Overlay Tint: Dark Slate */
	--theme-bg-overlay-rgb: 15, 23, 42;

	/* Gems: Muted/Darker versions */
	--theme-gem-ruby: #9f1239;
	--theme-gem-sapphire: #1e3a8a;
	--theme-gem-emerald: #064e3b;
	--theme-gem-amethyst: #581c87;
	--theme-gem-topaz: #78350f;

	/* Text: Grey/Silver (Low contrast environment) */
	--theme-text-primary: #e2e8f0;
	--theme-text-secondary: #94a3b8;
	--theme-text-muted: #818cf8;
	--theme-text-inverted: #f8fafc;

	/* Shadows */
	--theme-shadow: rgba(0, 0, 0, 0.9);
	--theme-overlay-light: rgba(255, 255, 255, 0.05);
	--theme-overlay-dark: rgba(0, 0, 0, 0.8);

	/* Border: Faint Phosphorescence */
	--theme-border: rgba(129, 140, 248, 0.15);
	--theme-border-hover: rgba(129, 140, 248, 0.4);
	--theme-effect-url: '';

	/* Typography */
	--theme-font-display: 'Uncial Antiqua', cursive;
	--theme-font-body: 'Inter', system-ui, sans-serif;

	/* Animation */
	--theme-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
	--theme-duration-fast: 150ms;
	--theme-duration-slow: 300ms;

	/* Visual Effects */
	--theme-noise-opacity: 0.05; /* Gritty stone texture */
	--theme-border-separator: none;
}

/* ========================
   BASE STYLES
   ======================== */

@layer base {
	body {
		@apply relative min-h-screen bg-fixed text-[var(--color-text-primary)];
		background: radial-gradient(circle at 50% 0%, var(--theme-bg-card), var(--theme-bg-canvas));
		font-family: var(--font-sans);
		-webkit-font-smoothing: antialiased;
	}

	/* Noise Texture Overlay */
	body::before {
		content: '';
		@apply pointer-events-none fixed inset-0 z-[9999];
		opacity: 0.03;
		background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
	}

	html {
		@apply scroll-pt-24 scroll-smooth;
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@apply font-bold tracking-tight text-[var(--color-text-primary)];
	}
}

/* ========================
   COMPONENT STYLES
   ======================== */

@layer components {
	/* The "Aero" Shine */
	.aero-shine {
		background: linear-gradient(
			to right,
			color-mix(in srgb, var(--color-text-primary) 0%, transparent) 0%,
			color-mix(in srgb, var(--color-text-primary) 10%, transparent) 50%,
			color-mix(in srgb, var(--color-text-primary) 0%, transparent) 100%
		);
		background-size: 200% 100%;
		animation: var(--animate-shimmer);
	}

	/* The Crystal Card */
	.card-crystal {
		@apply rounded-2xl border-b border-[var(--color-border)] transition-all duration-300;
		background-color: var(--color-bg-card);
		backdrop-filter: blur(12px);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 20%, transparent),
			inset 1px 0 0 color-mix(in srgb, var(--color-text-primary) 8%, transparent),
			inset -1px 0 0 color-mix(in srgb, var(--color-text-primary) 8%, transparent),
			0 8px 32px color-mix(in srgb, black 60%, transparent),
			0 0 0 1px var(--color-border);
	}

	.card-crystal:hover {
		@apply -translate-y-0.5;
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 30%, transparent),
			inset 1px 0 0 color-mix(in srgb, var(--color-text-primary) 12%, transparent),
			inset -1px 0 0 color-mix(in srgb, var(--color-text-primary) 12%, transparent),
			0 12px 48px color-mix(in srgb, black 70%, transparent),
			0 0 0 1px var(--color-border-hover);
	}

	.card-crystal:active {
		@apply translate-y-0;
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 18%, transparent),
			0 4px 16px color-mix(in srgb, black 50%, transparent),
			0 0 0 1px var(--color-border);
	}

	/* 3D Card */
	.card-3d {
		@apply rounded-xl transition-all duration-200;
		background-color: var(--color-bg-card);
		backdrop-filter: blur(8px);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 25%, transparent),
			inset 1px 0 0 color-mix(in srgb, var(--color-text-primary) 6%, transparent),
			inset -1px 0 0 color-mix(in srgb, var(--color-text-primary) 6%, transparent),
			0 4px 16px color-mix(in srgb, black 50%, transparent),
			0 0 0 1px var(--color-border);
	}

	.card-3d:hover {
		@apply -translate-y-0.75;
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 35%, transparent),
			inset 1px 0 0 color-mix(in srgb, var(--color-text-primary) 10%, transparent),
			inset -1px 0 0 color-mix(in srgb, var(--color-text-primary) 10%, transparent),
			0 8px 24px color-mix(in srgb, black 60%, transparent),
			0 0 0 1px var(--color-border-hover);
	}

	/* 3D Button */
	.btn-3d {
		@apply rounded-lg font-semibold transition-all duration-150;
		background: linear-gradient(
			180deg,
			color-mix(in srgb, var(--color-text-primary) 12%, var(--color-bg-card)) 0%,
			color-mix(in srgb, var(--color-text-primary) 5%, var(--color-bg-card)) 100%
		);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 25%, transparent),
			0 3px 6px rgba(0, 0, 0, 0.4),
			0 0 0 1px var(--color-border);
	}

	.btn-3d:hover {
		@apply -translate-y-0.5;
		background: linear-gradient(
			180deg,
			color-mix(in srgb, var(--color-text-primary) 18%, var(--color-bg-card)) 0%,
			color-mix(in srgb, var(--color-text-primary) 8%, var(--color-bg-card)) 100%
		);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 35%, transparent),
			0 5px 12px color-mix(in srgb, black 50%, transparent),
			0 0 0 1px var(--color-border-hover);
	}

	.btn-3d:active {
		@apply translate-y-0.5;
		background: linear-gradient(
			180deg,
			color-mix(in srgb, var(--color-text-primary) 6%, var(--color-bg-card)) 0%,
			color-mix(in srgb, var(--color-text-primary) 2%, var(--color-bg-card)) 100%
		);
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 30%, transparent),
			0 1px 3px color-mix(in srgb, black 40%, transparent),
			0 0 0 1px var(--color-border);
	}

	/* Recessed Input */
	.input-recessed {
		@apply rounded-lg transition-all duration-200;
		background-color: color-mix(in srgb, black 30%, transparent);
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 50%, transparent),
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 5%, transparent),
			0 0 0 1px var(--color-border);
	}

	.input-recessed:focus {
		@apply outline-none;
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 50%, transparent),
			inset 0 0 0 2px var(--color-accent),
			0 0 0 1px var(--color-border);
	}

	/* 3D Panel */
	.panel-3d {
		@apply rounded-xl;
		background-color: var(--color-bg-card);
		backdrop-filter: blur(16px);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 20%, transparent),
			0 8px 40px color-mix(in srgb, black 60%, transparent),
			0 0 0 1px var(--color-border);
	}

	/* The "Gem" Button */
	.btn-gem {
		@apply relative inline-flex cursor-pointer items-center justify-center overflow-hidden rounded-full px-4 py-2 font-bold transition-all duration-200;
		color: var(--color-text-inverted);
		background: linear-gradient(
			180deg,
			var(--color-accent) 0%,
			color-mix(in srgb, var(--color-accent) 70%, black) 100%
		);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-inverted) 40%, transparent),
			0 2px 4px color-mix(in srgb, black 30%, transparent),
			0 0 12px var(--color-accent-glow);
		text-shadow: 0 -1px 0 color-mix(in srgb, black 50%, transparent);
	}

	.btn-gem:hover {
		@apply -translate-y-0.5;
		filter: brightness(1.1);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-inverted) 60%, transparent),
			0 4px 12px color-mix(in srgb, black 40%, transparent),
			0 0 20px var(--color-accent-glow);
	}

	.btn-gem:active {
		@apply translate-y-0.5;
		background: linear-gradient(
			180deg,
			color-mix(in srgb, var(--color-accent) 60%, black) 0%,
			color-mix(in srgb, var(--color-accent) 50%, black) 100%
		);
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 30%, transparent),
			0 0 8px var(--color-accent-glow);
	}

	/* The "Engraved" Panel */
	.panel-inset {
		@apply rounded-xl border-b border-[var(--color-border)];
		background: color-mix(in srgb, black 20%, transparent);
		box-shadow: inset 0 2px 4px color-mix(in srgb, black 40%, transparent);
	}

	/* Text Effects */
	.text-holo {
		text-shadow:
			0 0 12px var(--color-accent-glow),
			0 2px 4px color-mix(in srgb, black 80%, transparent);
	}

	/* Input Crystal */
	.input-crystal {
		@apply rounded-xl border border-[var(--color-border)] bg-[color-mix(in_srgb,black_40%,transparent)] text-sm text-[var(--color-text-primary)] transition-all placeholder:text-[var(--color-text-muted)];
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 50%, transparent),
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 5%, transparent);
	}

	.input-crystal:focus {
		@apply ring-1 ring-[var(--color-accent)] outline-none;
		box-shadow:
			inset 0 2px 4px color-mix(in srgb, black 50%, transparent),
			inset 0 0 0 2px var(--color-accent),
			0 0 0 1px var(--color-border);
	}

	/* Scrollbar styles */
	.glass-scroll {
		@apply scrollbar-thin;
		scrollbar-color: color-mix(in srgb, var(--color-accent) 30%, transparent) transparent;
	}

	.glass-scroll::-webkit-scrollbar {
		@apply w-1.5;
	}

	.glass-scroll::-webkit-scrollbar-track {
		@apply bg-transparent;
	}

	.glass-scroll::-webkit-scrollbar-thumb {
		@apply rounded-[3px];
		background: color-mix(in srgb, var(--color-accent) 30%, transparent);
	}

	.glass-scroll::-webkit-scrollbar-thumb:hover {
		background: color-mix(in srgb, var(--color-accent) 50%, transparent);
	}

	/* ========================
	   LIST ITEM PATTERNS
	   ======================== */

	/* List Row - Standard list item with hover state */
	.list-row {
		@apply relative flex items-center gap-3 rounded-lg px-3 py-2.5 transition-all duration-200;
		background: transparent;
	}

	.list-row:hover {
		@apply bg-[color-mix(in_srgb,var(--color-accent)_8%,transparent)];
	}

	.list-row:active {
		@apply bg-[color-mix(in_srgb,var(--color-accent)_12%,transparent)];
	}

	/* List Item - Clickable card-style item */
	.list-item {
		@apply relative flex items-center gap-3 rounded-xl border border-[var(--color-border)] p-3 transition-all duration-200;
		background: var(--color-bg-card);
	}

	.list-item:hover {
		@apply -translate-y-0.5 border-[var(--color-border-hover)];
		box-shadow:
			0 4px 12px color-mix(in srgb, black 30%, transparent),
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 10%, transparent);
	}

	.list-item:active {
		@apply translate-y-0;
	}

	/* List Item Icon */
	.list-item-icon {
		@apply flex shrink-0 items-center justify-center rounded-lg;
		width: 2.5rem;
		height: 2.5rem;
		background: color-mix(in srgb, var(--color-accent) 12%, transparent);
		color: var(--color-accent);
	}

	/* List Item Content */
	.list-item-content {
		@apply min-w-0 flex-1;
	}

	.list-item-title {
		@apply block truncate text-sm font-medium text-[var(--color-text-primary)];
	}

	.list-item-description {
		@apply mt-0.5 block truncate text-xs text-[var(--color-text-secondary)];
	}

	/* List Item Meta */
	.list-item-meta {
		@apply shrink-0 text-right;
	}

	.list-item-badge {
		@apply inline-flex items-center rounded-md px-2 py-0.5 text-xs font-medium;
		background: color-mix(in srgb, black 30%, transparent);
		color: var(--color-text-muted);
	}

	/* List Item Arrow */
	.list-item-arrow {
		@apply shrink-0 text-[var(--color-text-muted)] transition-transform duration-200;
	}

	.list-item:hover .list-item-arrow {
		@apply text-[var(--color-accent)];
	}

	/* ========================
	   CATEGORY CARD PATTERNS
	   ======================== */

	.category-card {
		@apply relative overflow-hidden rounded-2xl border border-[var(--color-border)] p-5 transition-all duration-200;
		background: var(--color-bg-card);
	}

	.category-card:hover {
		@apply -translate-y-1 border-[var(--color-border-hover)];
		box-shadow:
			0 8px 32px color-mix(in srgb, black 40%, transparent),
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 15%, transparent);
	}

	.category-title {
		@apply mb-1 text-lg font-semibold tracking-tight text-[var(--color-text-primary)];
	}

	.category-description {
		@apply mb-4 text-sm text-[var(--color-text-muted)];
	}

	/* ========================
	   TYPE LIST PATTERNS
	   ======================== */

	.type-list {
		@apply flex flex-col gap-2;
	}

	.type-row {
		@apply relative flex items-center justify-between rounded-lg border border-transparent px-3 py-2.5 transition-all duration-150;
	}

	.type-row:hover {
		@apply border-[var(--color-border)] bg-[color-mix(in_srgb,var(--color-accent)_5%,transparent)];
	}

	.type-row:active {
		@apply bg-[color-mix(in_srgb,var(--color-accent)_10%,transparent)];
	}

	.type-info {
		@apply flex items-center gap-2.5;
	}

	.type-icon {
		@apply flex items-center justify-center text-lg text-[var(--color-text-secondary)];
	}

	.type-name {
		@apply text-sm font-medium text-[var(--color-text-primary)];
	}

	.type-count {
		@apply rounded-md px-2 py-0.5 text-xs font-medium tabular-nums;
		background: color-mix(in srgb, black 25%, transparent);
		color: var(--color-text-muted);
	}

	/* Toggle styles */
	.toggle-track {
		@apply transition-all duration-300;
		background: rgba(var(--theme-bg-overlay-rgb, 49, 46, 129), 0.6);
		border-color: var(--color-border);
	}

	.toggle-track:hover:not(:disabled) {
		border-color: var(--color-border-hover);
	}

	.toggle-track.toggle-checked {
		@apply transition-all duration-300;
		background: rgba(var(--theme-accent-rgb, 168, 85, 247), 0.4);
		border-color: var(--theme-accent);
	}

	.toggle-thumb {
		@apply transition-all duration-300;
		background: var(--theme-accent);
		box-shadow: 0 0 10px var(--theme-accent-glow);
	}

	.toggle-thumb.translate-x-4 {
		@apply translate-x-5;
	}

	/* ========================
	   ARCANE DASHBOARD - SETTINGS
	   ======================== */

	/* Settings Workspace */
	.settings-workspace {
		@apply relative min-h-full overflow-hidden;
		background:
			radial-gradient(ellipse at 20% 0%, rgba(var(--theme-accent-rgb), 0.12) 0%, transparent 50%),
			radial-gradient(ellipse at 80% 100%, rgba(var(--theme-accent-rgb), 0.08) 0%, transparent 50%),
			radial-gradient(circle at 50% 50%, rgba(var(--theme-accent-rgb), 0.03) 0%, transparent 70%),
			var(--color-bg-canvas);
	}

	/* Animated Magic Particles */
	.settings-workspace::before {
		content: '';
		@apply pointer-events-none absolute inset-0 z-0;
		background-image:
			radial-gradient(1px 1px at 20% 30%, rgba(var(--theme-accent-rgb), 0.3), transparent),
			radial-gradient(1px 1px at 40% 70%, rgba(var(--theme-accent-rgb), 0.2), transparent),
			radial-gradient(1px 1px at 60% 20%, rgba(var(--theme-accent-rgb), 0.25), transparent),
			radial-gradient(1px 1px at 80% 60%, rgba(var(--theme-accent-rgb), 0.2), transparent),
			radial-gradient(1px 1px at 90% 40%, rgba(var(--theme-accent-rgb), 0.15), transparent);
		background-size: 200% 200%;
		animation: var(--animate-arcane-particles);
	}

	/* Arcane Panel */
	.arcane-panel {
		@apply relative animate-arcane-materialize overflow-hidden rounded-2xl border border-[var(--color-border)] opacity-0;
		background: color-mix(in srgb, var(--color-bg-card) 80%, transparent);
		backdrop-filter: blur(16px);
		box-shadow:
			inset 0 1px 0 color-mix(in srgb, var(--color-text-primary) 15%, transparent),
			0 4px 24px color-mix(in srgb, black 40%, transparent),
			0 0 0 1px var(--color-border);
	}

	.arcane-panel::before {
		content: '';
		@apply absolute top-0 right-0 left-0 h-0.5;
		background: linear-gradient(90deg, transparent, var(--color-accent), transparent);
		opacity: 0.6;
	}

	.arcane-panel::after {
		content: '';
		@apply absolute top-2 right-2 h-3 w-3 rounded-tr-md;
		border-top: 2px solid color-mix(in srgb, var(--color-accent) 50%, transparent);
		border-right: 2px solid color-mix(in srgb, var(--color-accent) 50%, transparent);
	}

	.arcane-panel-header {
		@apply flex items-center gap-3 px-6 pt-5;
	}

	.arcane-panel-icon {
		@apply flex items-center justify-center rounded-lg text-[var(--color-accent)];
		width: 2.5rem;
		height: 2.5rem;
		background: color-mix(in srgb, var(--color-accent) 15%, transparent);
		border: 1px solid color-mix(in srgb, var(--color-accent) 30%, transparent);
		box-shadow:
			0 0 12px color-mix(in srgb, var(--color-accent) 20%, transparent),
			inset 0 1px 0 color-mix(in srgb, var(--color-accent) 20%, transparent);
	}

	.arcane-panel-title {
		@apply text-sm font-semibold tracking-widest text-[var(--color-text-primary)] uppercase;
	}

	.arcane-panel-description {
		@apply mt-1 text-xs text-[var(--color-text-secondary)];
	}

	.arcane-panel-content {
		@apply px-6 pb-6;
	}

	/* Runic Row */
	.runic-row {
		@apply relative flex items-center gap-4 py-4;
	}

	.runic-indicator {
		@apply flex items-center justify-center text-[var(--color-text-muted)] transition-all duration-300;
		width: 1.75rem;
		height: 1.75rem;
	}

	.runic-row:hover .runic-indicator {
		@apply text-[var(--color-accent)];
		text-shadow: 0 0 8px var(--color-accent-glow);
	}

	.runic-text {
		@apply min-w-0 flex-1;
	}

	.runic-label {
		@apply block overflow-hidden text-sm font-medium text-ellipsis whitespace-nowrap text-[var(--color-text-primary)] transition-colors duration-200;
	}

	.runic-row:hover .runic-label {
		@apply text-[var(--color-accent)];
	}

	.runic-description {
		@apply mt-0.5 block overflow-hidden text-xs text-ellipsis whitespace-nowrap text-[var(--color-text-secondary)];
	}

	.runic-control {
		@apply max-w-[50%] min-w-0 flex-shrink-0 overflow-hidden;
	}

	/* Runic Divider */
	.runic-divider {
		@apply relative my-0 h-px;
		background: linear-gradient(90deg, transparent, var(--color-border), transparent);
	}

	.runic-divider::before {
		content: '';
		@apply absolute -top-px left-1/2 h-0.75 w-1 rounded-sm;
		background: var(--color-accent);
		transform: translate-x-[-50%];
		opacity: 0.5;
	}

	/* Runic Seal Toggle */
	.runic-seal {
		@apply relative flex cursor-pointer items-center justify-center rounded-full text-[var(--color-text-muted)] transition-all duration-300;
		width: 2.25rem;
		height: 2.25rem;
		background: color-mix(in srgb, black 30%, transparent);
		border: 2px solid var(--color-border);
	}

	.runic-seal:hover:not(:disabled) {
		@apply scale-105;
		border-color: color-mix(in srgb, var(--color-accent) 50%, transparent);
	}

	.runic-seal:disabled {
		@apply cursor-not-allowed opacity-50;
	}

	.runic-seal[data-state='checked'] {
		@apply animate-rune-activate text-[var(--color-accent)];
		background: color-mix(in srgb, var(--color-accent) 20%, transparent);
		border-color: var(--color-accent);
		box-shadow:
			0 0 12px color-mix(in srgb, var(--color-accent) 30%, transparent),
			inset 0 0 8px color-mix(in srgb, var(--color-accent) 15%, transparent);
	}

	.runic-seal::after {
		content: '';
		@apply absolute -inset-1 rounded-full border border-transparent;
		background: conic-gradient(from 0deg, var(--color-accent), transparent, var(--color-accent));
		opacity: 0;
		mask: radial-gradient(circle, transparent 60%, black 61%);
		-webkit-mask: radial-gradient(circle, transparent 60%, black 61%);
		animation: var(--animate-energy-flow);
	}

	.runic-seal[data-state='checked']::after {
		opacity: 0.4;
	}

	/* Runestone Card */
	.runestone {
		@apply relative cursor-pointer overflow-hidden rounded-xl px-4 py-3 text-left transition-all duration-300;
		background: linear-gradient(
			145deg,
			color-mix(in srgb, var(--color-bg-card) 80%, transparent) 0%,
			color-mix(in srgb, black 20%, transparent) 100%
		);
		border: 1px solid var(--color-border);
	}

	.runestone::before {
		content: '';
		@apply pointer-events-none absolute inset-0 rounded-xl;
		padding: 1px;
		background: linear-gradient(
			145deg,
			color-mix(in srgb, var(--color-text-primary) 20%, transparent),
			transparent 50%,
			color-mix(in srgb, black 30%, transparent)
		);
		-webkit-mask:
			linear-gradient(#fff 0 0) content-box,
			linear-gradient(#fff 0 0);
		mask:
			linear-gradient(#fff 0 0) content-box,
			linear-gradient(#fff 0 0);
		-webkit-mask-composite: xor;
		mask-composite: exclude;
	}

	.runestone:hover {
		@apply -translate-y-0.5;
		border-color: var(--color-border-hover);
	}

	.runestone[data-state='selected'] {
		@apply border-[var(--color-accent)];
		background: linear-gradient(
			145deg,
			color-mix(in srgb, var(--color-accent) 12%, transparent) 0%,
			color-mix(in srgb, var(--color-accent) 5%, transparent) 100%
		);
		box-shadow:
			0 4px 16px color-mix(in srgb, var(--color-accent) 25%, transparent),
			inset 0 0 12px color-mix(in srgb, var(--color-accent) 8%, transparent);
	}

	.runestone[data-state='selected']::before {
		background: linear-gradient(
			145deg,
			color-mix(in srgb, var(--color-accent) 40%, transparent),
			transparent 50%,
			color-mix(in srgb, var(--color-accent) 40%, transparent)
		);
	}

	.runestone[data-state='selected']::after {
		content: '';
		@apply pointer-events-none absolute inset-[-2px] rounded-[calc(0.75rem+2px)] border border-[var(--color-accent)];
		opacity: 0.3;
		animation: var(--animate-aura-pulse);
	}

	.runestone-content {
		@apply relative z-10 flex items-center gap-2.5;
	}

	.runestone-rune {
		@apply flex items-center justify-center text-xs text-[var(--color-text-muted)] transition-all duration-300;
		width: 1.5rem;
		height: 1.5rem;
	}

	.runestone[data-state='selected'] .runestone-rune {
		@apply text-[var(--color-accent)];
		text-shadow: 0 0 8px var(--color-accent-glow);
	}

	.runestone-label {
		@apply flex-1;
	}

	.runestone-label-text {
		@apply block text-[13px] font-medium text-[var(--color-text-primary)];
	}

	.runestone[data-state='selected'] .runestone-label-text {
		@apply text-[var(--color-accent)];
	}

	.runestone-label-desc {
		@apply mt-0.5 block text-[11px] text-[var(--color-text-secondary)];
	}

	/* Theme Nexus */
	.theme-nexus {
		@apply relative mx-auto w-full;
		max-width: 280px;
		height: 280px;
	}

	.theme-nexus-center {
		@apply absolute top-1/2 left-1/2 z-20 flex cursor-pointer items-center justify-center rounded-full transition-all duration-300;
		width: 80px;
		height: 80px;
		transform: translate(-50%, -50%);
		background: radial-gradient(
			circle at 30% 30%,
			color-mix(in srgb, var(--color-accent) 30%, transparent),
			color-mix(in srgb, var(--color-accent) 10%, transparent)
		);
		border: 2px solid var(--color-accent);
		box-shadow:
			0 0 24px color-mix(in srgb, var(--color-accent) 30%, transparent),
			inset 0 0 16px color-mix(in srgb, var(--color-accent) 20%, transparent);
	}

	.theme-nexus-center:hover {
		@apply scale-105;
		box-shadow:
			0 0 32px color-mix(in srgb, var(--color-accent) 40%, transparent),
			inset 0 0 20px color-mix(in srgb, var(--color-accent) 25%, transparent);
	}

	.theme-nexus-orb {
		@apply absolute top-1/2 left-1/2 z-30 flex cursor-pointer items-center justify-center rounded-full transition-all duration-300;
		width: 48px;
		height: 48px;
		background: color-mix(in srgb, var(--color-bg-card) 90%, transparent);
		border: 1px solid var(--color-border);
		transform: translate(-50%, -50%);
	}

	.theme-nexus-orb:hover {
		@apply scale-[1.15] border-[var(--color-accent)];
		box-shadow: 0 0 16px color-mix(in srgb, var(--color-accent) 25%, transparent);
	}

	.theme-nexus-orb[data-active='true'] {
		@apply border-[var(--color-accent)];
		background: color-mix(in srgb, var(--color-accent) 15%, transparent);
		box-shadow:
			0 0 12px color-mix(in srgb, var(--color-accent) 30%, transparent),
			inset 0 0 8px color-mix(in srgb, var(--color-accent) 15%, transparent);
	}

	.theme-nexus-orb-preview {
		@apply rounded-full border border-white/20;
		width: 24px;
		height: 24px;
	}

	.theme-nexus-ring {
		@apply pointer-events-none absolute top-1/2 left-1/2 rounded-full border border-dashed border-[var(--color-border)] opacity-50;
		width: 220px;
		height: 220px;
		transform: translate(-50%, -50%);
	}

	/* Settings Section Header */
	.settings-section-header {
		@apply flex items-center gap-2;
	}

	.settings-section-header h2 {
		@apply m-0 text-xs font-bold tracking-[0.15em] text-[var(--color-text-primary)] uppercase;
	}

	.settings-section-header::after {
		content: '';
		@apply h-px flex-1;
		background: linear-gradient(90deg, var(--color-border), transparent);
	}

	/* ========================
	   SETTINGS PAGE
	   ======================== */

	.settings-container {
		@apply mx-auto grid max-w-[1200px] gap-8;
		grid-template-columns: 240px 1fr;
	}

	.settings-sidebar {
		@apply sticky top-6 h-fit overflow-y-auto pr-2;
		max-height: calc(100vh - 1.5rem);
	}

	.settings-sidebar::-webkit-scrollbar {
		@apply w-1;
	}

	.settings-sidebar::-webkit-scrollbar-track {
		@apply bg-transparent;
	}

	.settings-sidebar::-webkit-scrollbar-thumb {
		@apply rounded-sm bg-[var(--color-border)];
	}

	.settings-nav {
		@apply flex flex-col gap-1;
	}

	.settings-nav-item {
		@apply flex w-full cursor-pointer items-center gap-3 rounded-lg border-0 bg-transparent px-4 py-3 text-left text-sm font-medium text-[var(--color-text-secondary)] transition-all;
	}

	.settings-nav-item:hover {
		@apply bg-[color-mix(in_srgb,var(--color-accent)_10%,transparent)] text-[var(--color-text-primary)];
	}

	.settings-nav-item[data-state='active'] {
		@apply bg-[color-mix(in_srgb,var(--color-accent)_15%,transparent)] text-[var(--color-accent)] shadow-[0_0_12px_color-mix(in_srgb,var(--color-accent)_20%,transparent)];
	}

	.settings-nav-item .nav-icon {
		@apply flex-shrink-0;
	}

	.settings-nav-item .nav-label {
		@apply flex-1 overflow-hidden text-ellipsis whitespace-nowrap;
	}

	.settings-tab-content {
		@apply flex min-w-0 animate-fade-in flex-col gap-6;
	}

	.settings-group {
		@apply relative overflow-hidden;
	}

	.settings-group::before {
		content: '';
		@apply absolute top-0 right-0 left-0 h-0.5;
		background: linear-gradient(90deg, var(--accent-color, var(--color-accent)), transparent);
		opacity: 0.8;
	}

	.settings-group:hover::before {
		opacity: 1;
		box-shadow: 0 0 12px var(--accent-color, var(--color-accent-glow));
	}

	.settings-group[data-accent='amethyst'] {
		--group-accent: var(--color-gem-amethyst);
	}

	.settings-group[data-accent='emerald'] {
		--group-accent: var(--color-gem-emerald);
	}

	.settings-group[data-accent='sapphire'] {
		--group-accent: var(--color-gem-sapphire);
	}

	.settings-group[data-accent='topaz'] {
		--group-accent: var(--color-gem-topaz);
	}

	.settings-group[data-accent='ruby'] {
		--group-accent: var(--color-gem-ruby);
	}

	.settings-group[data-accent='pearl'] {
		--group-accent: var(--color-gem-pearl);
	}

	.settings-main {
		@apply flex min-w-0 flex-col gap-6;
	}

	/* Responsive: tablet and below */
	@media (max-width: 1024px) {
		.settings-container {
			grid-template-columns: 1fr;
		}

		.settings-sidebar {
			@apply relative top-0 mb-4 h-auto max-h-none pr-0;
		}

		.settings-nav {
			@apply flex-row flex-nowrap gap-2 overflow-x-auto pb-2;
		}

		.settings-nav-item {
			@apply flex-shrink-0 whitespace-nowrap;
		}
	}

	/* Mobile: compact navigation */
	@media (max-width: 640px) {
		.settings-nav-item .nav-label {
			@apply hidden;
		}

		.settings-nav-item {
			@apply px-3 py-2.5;
		}

		.settings-nav-item .nav-icon {
			@apply m-0;
		}
	}
}

/* ========================
   UTILITY CLASSES
   ======================== */

@layer components {
	/* Markdown Table Styles */
	.prose table {
		@apply w-full border-collapse overflow-hidden rounded-lg text-sm;
	}

	.prose thead {
		@apply border-b-2;
		border-color: var(--color-accent);
	}

	.prose th {
		@apply px-4 py-3 text-left font-semibold;
		color: var(--color-accent);
		background: color-mix(in srgb, var(--color-accent) 10%, transparent);
	}

	.prose tbody tr {
		@apply border-b transition-colors;
		border-color: var(--color-border);
	}

	.prose tbody tr:hover {
		background: color-mix(in srgb, var(--color-accent) 5%, transparent);
	}

	.prose td {
		@apply px-4 py-2;
		color: var(--color-text-primary);
	}

	.prose td:first-child {
		@apply font-medium;
	}

	.prose table em,
	.prose table i {
		color: var(--color-text-secondary);
	}
}

@layer utilities {
	.text-theme-primary {
		color: var(--color-text-primary);
	}

	.text-theme-secondary {
		color: var(--color-text-secondary);
	}

	.text-theme-muted {
		color: var(--color-text-muted);
	}

	.bg-theme-canvas {
		background-color: var(--color-bg-canvas);
	}

	.bg-theme-card {
		background-color: var(--color-bg-card);
	}

	.bg-theme-overlay {
		background-color: var(--color-bg-overlay);
	}

	.border-theme {
		border-color: var(--color-border);
	}

	.border-theme-hover:hover {
		border-color: var(--color-border-hover);
	}

	.text-accent {
		color: var(--color-accent);
	}

	.bg-accent {
		background-color: var(--color-accent);
	}

	.ring-accent {
		--tw-ring-color: var(--color-accent);
	}
}
